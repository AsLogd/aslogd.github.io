function debounce(t,e,i){var n;return function(){var r=this,o=arguments,s=function(){n=null,i||t.apply(r,o)},a=i&&!n;clearTimeout(n),n=setTimeout(s,e),a&&t.apply(r,o)}}var Tile=function(){function t(){this.container=document.createElement("div"),this.container.classList.add("tile")}return t.prototype.paint=function(t,e){var i=this;void 0===e&&(e=2500);var n="";switch(t){case TileColors.Red:n="red";break;case TileColors.Yellow:n="yellow";break;case TileColors.Green:n="green"}this.container.classList.add(n),setTimeout(function(){i.container.classList.remove(n)},e)},t.prototype.clear=function(){this.container.classList.remove("red"),this.container.classList.remove("yellow"),this.container.classList.remove("green")},t.prototype.remove=function(){this.container.parentElement.removeChild(this.container)},t}(),TileRow=function(){function t(){this._tiles=new Array,this.container=document.createElement("div"),this.container.classList.add("tiles-row")}return t.prototype.add=function(t){this.container.appendChild(t.container),this._tiles.push(t)},t.prototype.paint=function(t,e){void 0===e&&(e=2500);for(var i=0,n=this._tiles;i<n.length;i++){n[i].paint(t,e)}},t.prototype.clear=function(){for(var t=0,e=this._tiles;t<e.length;t++){e[t].clear()}},t.prototype.getTile=function(t){return this._tiles[t]},t.prototype.remove=function(){this.container.parentNode.removeChild(this.container)},t.prototype.removeLastTile=function(){this._tiles.pop().remove()},t}(),TileGridState;!function(t){t[t.Static=0]="Static",t[t.Random=1]="Random"}(TileGridState||(TileGridState={}));var TileColors;!function(t){t[t.Yellow=0]="Yellow",t[t.Red=1]="Red",t[t.Green=2]="Green"}(TileColors||(TileColors={}));var TileGrid=function(){function t(t,e,i,n){void 0===i&&(i=120),void 0===n&&(n="#background");var r=this;this.tickDelay=200,this._rows=new Array,this._currentState=TileGridState.Random,this._tileWidth=i,this._n=Math.ceil(window.innerHeight/i*2)+1,this._m=Math.ceil(window.innerWidth/i)+1,this.container=document.querySelector(n);for(var o=0;o<this._n;o++){for(var s=new TileRow,a=0;a<this._m;a++){var l=new Tile;s.add(l)}this.container.appendChild(s.container),this._rows.push(s)}setInterval(function(){return r.tick()},this.tickDelay)}return t.prototype.resize=function(t,e){var i=Math.ceil(window.innerHeight/this._tileWidth*2)+1,n=Math.ceil(window.innerWidth/this._tileWidth)+1;if(n>this._m)for(var r=n-this._m,o=0;o<this._n;o++)for(var s=this._rows[o],a=0;a<r;a++){var l=new Tile;s.add(l)}else if(n<this._m)for(var r=this._m-n,o=0;o<this._n;o++)for(var s=this._rows[o],a=1;a<=r;a++)s.removeLastTile();if(this._m=n,i>this._n)for(var r=i-this._n,o=0;o<r;o++){for(var s=new TileRow,a=0;a<this._m;a++){var l=new Tile;s.add(l)}this.container.appendChild(s.container),this._rows.push(s)}else if(i<this._n)for(var r=this._n-i,o=0;o<r;o++){var s=this._rows.pop();s.remove()}this._n=i},t.prototype.tick=function(){if(this._lastState!=this._currentState&&this.clear(),this._currentState==TileGridState.Random){this._lastState=TileGridState.Random;var t=Math.floor(Math.random()*this._n),e=Math.floor(Math.random()*this._m),i=Math.random();i<.25?this._rows[t].getTile(e).paint(TileColors.Yellow):i<.5?this._rows[t].getTile(e).paint(TileColors.Red):i<.75&&this._rows[t].getTile(e).paint(TileColors.Green)}else if(this._currentState==TileGridState.Static){this._lastState=TileGridState.Static;for(var n in this._rows){var t=Number(n);t<.25*this._n?this._rows[t].paint(TileColors.Yellow):t>.75*this._n&&this._rows[t].paint(TileColors.Red)}}},t.prototype.changeState=function(){this._currentState=(this._currentState+1)%2},t.prototype.clear=function(){for(var t=0,e=this._rows;t<e.length;t++){e[t].clear()}},t}();document.addEventListener("DOMContentLoaded",function(){var t=new TileGrid(window.innerWidth,window.innerHeight);document.body.addEventListener("click",function(){t.changeState()}),window.addEventListener("resize",debounce(function(){t.resize(window.innerWidth,window.innerHeight)},300))});